{"ast":null,"code":"import _objectSpread from\"D:/Django learning/Reacr-Django notes/myNotes/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"D:/Django learning/Reacr-Django notes/myNotes/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Django learning/Reacr-Django notes/myNotes/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Django learning/Reacr-Django notes/myNotes/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Link,useParams,useNavigate}from\"react-router-dom\";import{ReactComponent as ArrowLeft}from'../assets/arrow-left.svg';import{browserHistory}from'react-router';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function getCookie(name){var cookieValue=document.cookie.match(\"(^|;)\\\\s*\"+name+\"\\\\s*=\\\\s*([^;]+)\");return cookieValue?cookieValue.pop():\"\";}var NotePage=function NotePage(_ref){var _ref2,_ref3,_ref4,_ref5;var match=_ref.match,history=_ref.history;var params=useParams();var noteId=params.id;var navigate=useNavigate();var csrfToken=getCookie('csrftoken');var _useState=useState(null),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNotes=_useState2[1];useEffect(function(){getNotes();},[noteId]);var getNotes=function getNotes(){return(_ref2=_ref2||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/notes/\".concat(noteId));case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;setNotes(data);case 7:case\"end\":return _context.stop();}},_callee);}))).apply(this,arguments);};var updateNote=function updateNote(){return(_ref3=_ref3||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"/api/notes/\".concat(noteId,\"/update/\"),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});case 3:// Navigate back to the home page after updating the note\nnavigate('/');_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);console.error('Error updating note:',_context2.t0);case 9:case\"end\":return _context2.stop();}},_callee2,null,[[0,6]]);}))).apply(this,arguments);};var createNote=function createNote(){return(_ref4=_ref4||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return fetch(\"/api/notes/create/\",{method:'POST',headers:{'Content-Type':'application/json','X-CSRFToken':csrfToken},body:JSON.stringify(note)});case 3:_context3.next=8;break;case 5:_context3.prev=5;_context3.t0=_context3[\"catch\"](0);console.error('Error updating note:',_context3.t0);case 8:case\"end\":return _context3.stop();}},_callee3,null,[[0,5]]);}))).apply(this,arguments);};var deleteNote=function deleteNote(){return(_ref5=_ref5||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return fetch(\"/api/notes/\".concat(noteId,\"/delete/\"),{method:'DELETE',headers:{'Content-Type':'application/json','X-CSRFToken':csrfToken},body:JSON.stringify(note)});case 3:// Navigate back to the home page after updating the note\nnavigate('/');_context4.next=9;break;case 6:_context4.prev=6;_context4.t0=_context4[\"catch\"](0);console.error('Error updating note:',_context4.t0);case 9:case\"end\":return _context4.stop();}},_callee4,null,[[0,6]]);}))).apply(this,arguments);};var handleSubmit=function handleSubmit(){console.log('NOTE:',note);if(noteId!=='new'&&note.body==''){deleteNote();}else if(noteId!=='new'){updateNote();}else if(noteId==='new'&&note.body!==null){createNote();}navigate('/');};var handleChange=function handleChange(value){setNotes(function(note){return _objectSpread(_objectSpread({},note),{},{'body':value});});console.log('Handle Change:',note);};return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(ArrowLeft,{onClick:handleSubmit})}),noteId!=='new'?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\"Delete\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Done\"})]}),/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(e){handleChange(e.target.value);},value:note===null||note===void 0?void 0:note.body})]});};export default NotePage;","map":{"version":3,"names":["React","useState","useEffect","Link","useParams","useNavigate","ReactComponent","ArrowLeft","browserHistory","jsx","_jsx","jsxs","_jsxs","getCookie","name","cookieValue","document","cookie","match","pop","NotePage","_ref","_ref2","_ref3","_ref4","_ref5","history","params","noteId","id","navigate","csrfToken","_useState","_useState2","_slicedToArray","note","setNotes","getNotes","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","concat","sent","json","stop","apply","arguments","updateNote","_callee2","_callee2$","_context2","method","headers","body","JSON","stringify","t0","console","error","createNote","_callee3","_callee3$","_context3","deleteNote","_callee4","_callee4$","_context4","handleSubmit","log","handleChange","value","_objectSpread","className","children","onClick","onChange","e","target"],"sources":["D:/Django learning/Reacr-Django notes/myNotes/frontend/src/pages/NotePage.js"],"sourcesContent":["import React,{useState,useEffect} from 'react'\r\nimport { Link, useParams ,useNavigate } from \"react-router-dom\";\r\nimport {ReactComponent as ArrowLeft} from '../assets/arrow-left.svg'\r\nimport { browserHistory } from 'react-router'\r\n\r\n\r\n\r\nfunction getCookie(name) {\r\n      const cookieValue = document.cookie.match(\r\n        \"(^|;)\\\\s*\" + name + \"\\\\s*=\\\\s*([^;]+)\"\r\n      );\r\n      return cookieValue ? cookieValue.pop() : \"\";\r\n    }\r\n\r\n\r\n\r\nconst NotePage = ({match ,history}) => {\r\n    const params = useParams();\r\n    let noteId = params.id;\r\n    const navigate = useNavigate();\r\n    const csrfToken = getCookie('csrftoken');\r\n\r\n    let [note,setNotes] = useState(null)\r\n\r\n    \r\n\r\n    useEffect(() => {\r\n        getNotes()\r\n    },[noteId])\r\n\r\n    let getNotes= async() =>{\r\n        let response= await fetch(`/api/notes/${noteId}`)\r\n        let data=await response.json() \r\n        setNotes(data)\r\n    }\r\n\r\n\r\n    const updateNote = async () => {\r\n        \r\n        try {\r\n          await fetch(`/api/notes/${noteId}/update/`, {\r\n            method: 'PUT',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(note),\r\n          });\r\n          // Navigate back to the home page after updating the note\r\n          navigate('/');\r\n        } catch (error) {\r\n          console.error('Error updating note:', error);\r\n        }\r\n      };\r\n\r\n    \r\n    const createNote = async () => {\r\n        try {\r\n          await fetch(`/api/notes/create/`, {\r\n            method: 'POST',\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n              'X-CSRFToken': csrfToken,\r\n            },\r\n            body: JSON.stringify(note),\r\n          });\r\n          // Navigate back to the home page after updating the note\r\n        } catch (error) {\r\n          console.error('Error updating note:', error);\r\n        }\r\n      };\r\n\r\n    let deleteNote = async () =>{\r\n        try {\r\n            await fetch(`/api/notes/${noteId}/delete/`, {\r\n              method: 'DELETE',\r\n              headers: {\r\n                'Content-Type': 'application/json',\r\n                'X-CSRFToken': csrfToken,\r\n              },\r\n              body: JSON.stringify(note),\r\n            });\r\n            // Navigate back to the home page after updating the note\r\n            navigate('/')\r\n          } catch (error) {\r\n            console.error('Error updating note:', error);\r\n          }\r\n        \r\n    }\r\n\r\n    let handleSubmit = () => {\r\n        console.log('NOTE:', note)\r\n        if (noteId !== 'new' && note.body == '') {\r\n            deleteNote()\r\n        } else if (noteId !== 'new') {\r\n            updateNote()\r\n        } else if (noteId === 'new' && note.body !== null) {\r\n            createNote()\r\n        }\r\n\r\n        navigate('/')\r\n    }\r\n\r\n    let handleChange = (value) => {\r\n        setNotes(note => ({ ...note, 'body': value }))\r\n        console.log('Handle Change:', note)\r\n    }\r\n\r\n  return (\r\n    <div className='note'>\r\n    <div className='note-header'><h3><ArrowLeft onClick={handleSubmit}></ArrowLeft></h3>\r\n    {noteId !== 'new' ? (\r\n                    <button onClick={deleteNote}>Delete</button>\r\n                ) : (\r\n                    <button onClick={handleSubmit}>Done</button>\r\n                )}\r\n    \r\n    </div>\r\n        \r\n        <textarea onChange={(e) => { handleChange(e.target.value) }} value={note?.body}></textarea>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default NotePage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}