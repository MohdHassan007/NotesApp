{"ast":null,"code":"import _objectSpread from\"D:/Django learning/Reacr-Django notes/myNotes/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"D:/Django learning/Reacr-Django notes/myNotes/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Django learning/Reacr-Django notes/myNotes/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Django learning/Reacr-Django notes/myNotes/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{ReactComponent as ArrowLeft}from'../assets/arrow-left.svg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function getCookie(name){var cookieValue=document.cookie.match('(^|;)\\\\s*'+name+'\\\\s*=\\\\s*([^;]+)');return cookieValue?cookieValue.pop():'';}var NotePage=function NotePage(_ref){var _ref2,_ref3,_ref4,_ref5;var match=_ref.match,history=_ref.history;var params=useParams();var noteId=params.id;var navigate=useNavigate();var csrfToken=getCookie('csrftoken');var _useState=useState(null),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNotes=_useState2[1];useEffect(function(){getNotes();},[noteId]);var getNotes=function getNotes(){return(_ref2=_ref2||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"/api/notes/\".concat(noteId));case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;setNotes(data);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.error('Error fetching note:',_context.t0);case 13:case\"end\":return _context.stop();}},_callee,null,[[0,10]]);}))).apply(this,arguments);};var updateNote=function updateNote(){return(_ref3=_ref3||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"/api/notes/\".concat(noteId,\"/update/\"),{method:'PUT',headers:{'Content-Type':'application/json','X-CSRFToken':csrfToken},body:JSON.stringify(note)});case 3:// Navigate back to the home page after updating the note\nnavigate('/');_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);console.error('Error updating note:',_context2.t0);case 9:case\"end\":return _context2.stop();}},_callee2,null,[[0,6]]);}))).apply(this,arguments);};var createNote=function createNote(){return(_ref4=_ref4||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return fetch(\"/api/notes/create/\",{method:'POST',headers:{'Content-Type':'application/json','X-CSRFToken':csrfToken},body:JSON.stringify(note)});case 3:// Navigate back to the home page after creating the note\nnavigate('/');_context3.next=9;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);console.error('Error creating note:',_context3.t0);case 9:case\"end\":return _context3.stop();}},_callee3,null,[[0,6]]);}))).apply(this,arguments);};var deleteNote=function deleteNote(){return(_ref5=_ref5||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return fetch(\"/api/notes/\".concat(noteId,\"/delete/\"),{method:'DELETE',headers:{'Content-Type':'application/json','X-CSRFToken':csrfToken},body:JSON.stringify(note)});case 3:// Navigate back to the home page after deleting the note\nnavigate('/');_context4.next=9;break;case 6:_context4.prev=6;_context4.t0=_context4[\"catch\"](0);console.error('Error deleting note:',_context4.t0);case 9:case\"end\":return _context4.stop();}},_callee4,null,[[0,6]]);}))).apply(this,arguments);};var handleSubmit=function handleSubmit(){console.log('NOTE:',note);if(noteId!=='new'&&note.body===''){deleteNote();}else if(noteId!=='new'){updateNote();}else if(noteId==='new'&&note.body!==null){createNote();}navigate('/');};var handleChange=function handleChange(value){setNotes(function(prevNote){return _objectSpread(_objectSpread({},prevNote),{},{'body':value});});console.log('Handle Change:',note);};return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(ArrowLeft,{onClick:handleSubmit})}),noteId!=='new'?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\"Delete\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Done\"})]}),/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(e){handleChange(e.target.value);},value:note===null||note===void 0?void 0:note.body})]});};export default NotePage;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","ReactComponent","ArrowLeft","jsx","_jsx","jsxs","_jsxs","getCookie","name","cookieValue","document","cookie","match","pop","NotePage","_ref","_ref2","_ref3","_ref4","_ref5","history","params","noteId","id","navigate","csrfToken","_useState","_useState2","_slicedToArray","note","setNotes","getNotes","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","concat","sent","json","t0","console","error","stop","apply","arguments","updateNote","_callee2","_callee2$","_context2","method","headers","body","JSON","stringify","createNote","_callee3","_callee3$","_context3","deleteNote","_callee4","_callee4$","_context4","handleSubmit","log","handleChange","value","prevNote","_objectSpread","className","children","onClick","onChange","e","target"],"sources":["D:/Django learning/Reacr-Django notes/myNotes/frontend/src/pages/NotePage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { ReactComponent as ArrowLeft } from '../assets/arrow-left.svg';\r\n\r\nfunction getCookie(name) {\r\n  const cookieValue = document.cookie.match('(^|;)\\\\s*' + name + '\\\\s*=\\\\s*([^;]+)');\r\n  return cookieValue ? cookieValue.pop() : '';\r\n}\r\n\r\nconst NotePage = ({ match, history }) => {\r\n  const params = useParams();\r\n  const noteId = params.id;\r\n  const navigate = useNavigate();\r\n  const csrfToken = getCookie('csrftoken');\r\n  const [note, setNotes] = useState(null);\r\n\r\n  useEffect(() => {\r\n    getNotes();\r\n  }, [noteId]);\r\n\r\n  const getNotes = async () => {\r\n    try {\r\n      const response = await fetch(`/api/notes/${noteId}`);\r\n      const data = await response.json();\r\n      setNotes(data);\r\n    } catch (error) {\r\n      console.error('Error fetching note:', error);\r\n    }\r\n  };\r\n\r\n  const updateNote = async () => {\r\n    try {\r\n      await fetch(`/api/notes/${noteId}/update/`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'X-CSRFToken': csrfToken,\r\n        },\r\n        body: JSON.stringify(note),\r\n      });\r\n      // Navigate back to the home page after updating the note\r\n      navigate('/');\r\n    } catch (error) {\r\n      console.error('Error updating note:', error);\r\n    }\r\n  };\r\n\r\n  const createNote = async () => {\r\n    try {\r\n      await fetch(`/api/notes/create/`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'X-CSRFToken': csrfToken,\r\n        },\r\n        body: JSON.stringify(note),\r\n      });\r\n      // Navigate back to the home page after creating the note\r\n      navigate('/');\r\n    } catch (error) {\r\n      console.error('Error creating note:', error);\r\n    }\r\n  };\r\n\r\n  const deleteNote = async () => {\r\n    try {\r\n      await fetch(`/api/notes/${noteId}/delete/`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'X-CSRFToken': csrfToken,\r\n        },\r\n        body: JSON.stringify(note),\r\n      });\r\n      // Navigate back to the home page after deleting the note\r\n      navigate('/');\r\n    } catch (error) {\r\n      console.error('Error deleting note:', error);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    console.log('NOTE:', note);\r\n    if (noteId !== 'new' && note.body === '') {\r\n      deleteNote();\r\n    } else if (noteId !== 'new') {\r\n      updateNote();\r\n    } else if (noteId === 'new' && note.body !== null) {\r\n      createNote();\r\n    }\r\n\r\n    navigate('/');\r\n  };\r\n\r\n  const handleChange = (value) => {\r\n    setNotes((prevNote) => ({ ...prevNote, 'body': value }));\r\n    console.log('Handle Change:', note);\r\n  };\r\n\r\n  return (\r\n    <div className='note'>\r\n      <div className='note-header'>\r\n        <h3><ArrowLeft onClick={handleSubmit}></ArrowLeft></h3>\r\n        {noteId !== 'new' ? (\r\n          <button onClick={deleteNote}>Delete</button>\r\n        ) : (\r\n          <button onClick={handleSubmit}>Done</button>\r\n        )}\r\n      </div>\r\n      <textarea onChange={(e) => { handleChange(e.target.value) }} value={note?.body}></textarea>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotePage;"],"mappings":"+jBAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CACzD,OAASC,cAAc,GAAI,CAAAC,SAAS,KAAQ,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEvE,QAAS,CAAAC,SAASA,CAACC,IAAI,CAAE,CACvB,GAAM,CAAAC,WAAW,CAAGC,QAAQ,CAACC,MAAM,CAACC,KAAK,CAAC,WAAW,CAAGJ,IAAI,CAAG,kBAAkB,CAAC,CAClF,MAAO,CAAAC,WAAW,CAAGA,WAAW,CAACI,GAAG,CAAC,CAAC,CAAG,EAAE,CAC7C,CAEA,GAAM,CAAAC,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAAC,IAAA,CAA2B,KAAAC,KAAA,CAAAC,KAAA,CAAAC,KAAA,CAAAC,KAAA,IAArB,CAAAP,KAAK,CAAAG,IAAA,CAALH,KAAK,CAAEQ,OAAO,CAAAL,IAAA,CAAPK,OAAO,CAChC,GAAM,CAAAC,MAAM,CAAGtB,SAAS,CAAC,CAAC,CAC1B,GAAM,CAAAuB,MAAM,CAAGD,MAAM,CAACE,EAAE,CACxB,GAAM,CAAAC,QAAQ,CAAGxB,WAAW,CAAC,CAAC,CAC9B,GAAM,CAAAyB,SAAS,CAAGlB,SAAS,CAAC,WAAW,CAAC,CACxC,IAAAmB,SAAA,CAAyB7B,QAAQ,CAAC,IAAI,CAAC,CAAA8B,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAhCG,IAAI,CAAAF,UAAA,IAAEG,QAAQ,CAAAH,UAAA,IAErB7B,SAAS,CAAC,UAAM,CACdiC,QAAQ,CAAC,CAAC,CACZ,CAAC,CAAE,CAACT,MAAM,CAAC,CAAC,CAEZ,GAAM,CAAAS,QAAQ,SAAR,CAAAA,QAAQA,CAAA,SAAAf,KAAA,CAAAA,KAAA,EAAAgB,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,QAAA,CAAAC,IAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEU,CAAAC,KAAK,eAAAC,MAAA,CAAetB,MAAM,CAAE,CAAC,QAA9Cc,QAAQ,CAAAI,QAAA,CAAAK,IAAA,CAAAL,QAAA,CAAAE,IAAA,SACK,CAAAN,QAAQ,CAACU,IAAI,CAAC,CAAC,QAA5BT,IAAI,CAAAG,QAAA,CAAAK,IAAA,CACVf,QAAQ,CAACO,IAAI,CAAC,CAACG,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAO,EAAA,CAAAP,QAAA,aAEfQ,OAAO,CAACC,KAAK,CAAC,sBAAsB,CAAAT,QAAA,CAAAO,EAAO,CAAC,CAAC,yBAAAP,QAAA,CAAAU,IAAA,MAAAf,OAAA,iBAEhD,IAAAgB,KAAA,MAAAC,SAAA,IAED,GAAM,CAAAC,UAAU,SAAV,CAAAA,UAAUA,CAAA,SAAApC,KAAA,CAAAA,KAAA,EAAAe,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAoB,SAAA,SAAArB,mBAAA,GAAAK,IAAA,UAAAiB,UAAAC,SAAA,iBAAAA,SAAA,CAAAf,IAAA,CAAAe,SAAA,CAAAd,IAAA,SAAAc,SAAA,CAAAf,IAAA,GAAAe,SAAA,CAAAd,IAAA,SAET,CAAAC,KAAK,eAAAC,MAAA,CAAetB,MAAM,aAAY,CAC1CmC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClC,aAAa,CAAEjC,SACjB,CAAC,CACDkC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAChC,IAAI,CAC3B,CAAC,CAAC,QACF;AACAL,QAAQ,CAAC,GAAG,CAAC,CAACgC,SAAA,CAAAd,IAAA,gBAAAc,SAAA,CAAAf,IAAA,GAAAe,SAAA,CAAAT,EAAA,CAAAS,SAAA,aAEdR,OAAO,CAACC,KAAK,CAAC,sBAAsB,CAAAO,SAAA,CAAAT,EAAO,CAAC,CAAC,wBAAAS,SAAA,CAAAN,IAAA,MAAAI,QAAA,gBAEhD,IAAAH,KAAA,MAAAC,SAAA,IAED,GAAM,CAAAU,UAAU,SAAV,CAAAA,UAAUA,CAAA,SAAA5C,KAAA,CAAAA,KAAA,EAAAc,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAA6B,SAAA,SAAA9B,mBAAA,GAAAK,IAAA,UAAA0B,UAAAC,SAAA,iBAAAA,SAAA,CAAAxB,IAAA,CAAAwB,SAAA,CAAAvB,IAAA,SAAAuB,SAAA,CAAAxB,IAAA,GAAAwB,SAAA,CAAAvB,IAAA,SAET,CAAAC,KAAK,sBAAuB,CAChCc,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClC,aAAa,CAAEjC,SACjB,CAAC,CACDkC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAChC,IAAI,CAC3B,CAAC,CAAC,QACF;AACAL,QAAQ,CAAC,GAAG,CAAC,CAACyC,SAAA,CAAAvB,IAAA,gBAAAuB,SAAA,CAAAxB,IAAA,GAAAwB,SAAA,CAAAlB,EAAA,CAAAkB,SAAA,aAEdjB,OAAO,CAACC,KAAK,CAAC,sBAAsB,CAAAgB,SAAA,CAAAlB,EAAO,CAAC,CAAC,wBAAAkB,SAAA,CAAAf,IAAA,MAAAa,QAAA,gBAEhD,IAAAZ,KAAA,MAAAC,SAAA,IAED,GAAM,CAAAc,UAAU,SAAV,CAAAA,UAAUA,CAAA,SAAA/C,KAAA,CAAAA,KAAA,EAAAa,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAiC,SAAA,SAAAlC,mBAAA,GAAAK,IAAA,UAAA8B,UAAAC,SAAA,iBAAAA,SAAA,CAAA5B,IAAA,CAAA4B,SAAA,CAAA3B,IAAA,SAAA2B,SAAA,CAAA5B,IAAA,GAAA4B,SAAA,CAAA3B,IAAA,SAET,CAAAC,KAAK,eAAAC,MAAA,CAAetB,MAAM,aAAY,CAC1CmC,MAAM,CAAE,QAAQ,CAChBC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClC,aAAa,CAAEjC,SACjB,CAAC,CACDkC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAChC,IAAI,CAC3B,CAAC,CAAC,QACF;AACAL,QAAQ,CAAC,GAAG,CAAC,CAAC6C,SAAA,CAAA3B,IAAA,gBAAA2B,SAAA,CAAA5B,IAAA,GAAA4B,SAAA,CAAAtB,EAAA,CAAAsB,SAAA,aAEdrB,OAAO,CAACC,KAAK,CAAC,sBAAsB,CAAAoB,SAAA,CAAAtB,EAAO,CAAC,CAAC,wBAAAsB,SAAA,CAAAnB,IAAA,MAAAiB,QAAA,gBAEhD,IAAAhB,KAAA,MAAAC,SAAA,IAED,GAAM,CAAAkB,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAA,CAAS,CACzBtB,OAAO,CAACuB,GAAG,CAAC,OAAO,CAAE1C,IAAI,CAAC,CAC1B,GAAIP,MAAM,GAAK,KAAK,EAAIO,IAAI,CAAC8B,IAAI,GAAK,EAAE,CAAE,CACxCO,UAAU,CAAC,CAAC,CACd,CAAC,IAAM,IAAI5C,MAAM,GAAK,KAAK,CAAE,CAC3B+B,UAAU,CAAC,CAAC,CACd,CAAC,IAAM,IAAI/B,MAAM,GAAK,KAAK,EAAIO,IAAI,CAAC8B,IAAI,GAAK,IAAI,CAAE,CACjDG,UAAU,CAAC,CAAC,CACd,CAEAtC,QAAQ,CAAC,GAAG,CAAC,CACf,CAAC,CAED,GAAM,CAAAgD,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIC,KAAK,CAAK,CAC9B3C,QAAQ,CAAC,SAAC4C,QAAQ,SAAAC,aAAA,CAAAA,aAAA,IAAWD,QAAQ,MAAE,MAAM,CAAED,KAAK,IAAG,CAAC,CACxDzB,OAAO,CAACuB,GAAG,CAAC,gBAAgB,CAAE1C,IAAI,CAAC,CACrC,CAAC,CAED,mBACEvB,KAAA,QAAKsE,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBvE,KAAA,QAAKsE,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BzE,IAAA,OAAAyE,QAAA,cAAIzE,IAAA,CAACF,SAAS,EAAC4E,OAAO,CAAER,YAAa,CAAY,CAAC,CAAI,CAAC,CACtDhD,MAAM,GAAK,KAAK,cACflB,IAAA,WAAQ0E,OAAO,CAAEZ,UAAW,CAAAW,QAAA,CAAC,QAAM,CAAQ,CAAC,cAE5CzE,IAAA,WAAQ0E,OAAO,CAAER,YAAa,CAAAO,QAAA,CAAC,MAAI,CAAQ,CAC5C,EACE,CAAC,cACNzE,IAAA,aAAU2E,QAAQ,CAAE,SAAAA,SAACC,CAAC,CAAK,CAAER,YAAY,CAACQ,CAAC,CAACC,MAAM,CAACR,KAAK,CAAC,CAAC,CAAE,CAACA,KAAK,CAAE5C,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE8B,IAAK,CAAW,CAAC,EACxF,CAAC,CAEV,CAAC,CAED,cAAe,CAAA7C,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}